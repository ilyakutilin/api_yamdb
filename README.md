<h1 align="center">
    Yamdb
</h1>

<h4 align="center">Сервис выставления оценок и отзывов пользователей на произведения</h4>

- [[#описание|Описание]]
- [[#Ресурсы API YaMDb|Ресурсы API YaMDb]]
- [[#Пользовательские роли и права доступа|Пользовательские роли и права доступа]]
- [[#Самостоятельная регистрация новых пользователей|Самостоятельная регистрация новых пользователей]]
- [[#Создание пользователя администратором|Создание пользователя администратором]]
- [[#Установка и запуск|Установка и запуск]]
- [[#Документация|Документация]]

## Описание

Проект YaMDb собирает **отзывы** пользователей на **произведения**. Сами произведения в YaMDb не хранятся.

Произведения делятся на **категории**, такие как «Книги», «Фильмы», «Музыка». Список категорий может быть расширен.

Произведению может быть присвоен **жанр** из списка предустановленных.

Добавлять произведения, категории и жанры может только администратор.

Пользователи оставляют к произведениям текстовые отзывы и ставят произведению оценку в диапазоне от одного до десяти; из пользовательских оценок формируется усреднённая оценка произведения — **рейтинг**. На одно произведение пользователь может оставить только один отзыв.

Добавлять отзывы, комментарии и ставить оценки могут только аутентифицированные пользователи.

## Ресурсы API YaMDb

-   Ресурс **auth:** аутентификация.
-   Ресурс **users:** пользователи.
-   Ресурс **titles:** произведения, к которым пишут отзывы (определённый фильм, книга или песенка).
-   Ресурс **categories:** категории (типы) произведений («Фильмы», «Книги», «Музыка»).
-   Ресурс **genres**: жанры произведений. Одно произведение может быть привязано к нескольким жанрам.
-   Ресурс **reviews:** отзывы на произведения. Отзыв привязан к определённому произведению.
-   Ресурс **comments:** комментарии к отзывам. Комментарий привязан к определённому отзыву.

Каждый ресурс описан в документации: указаны эндпоинты (адреса, по которым можно сделать запрос), разрешённые типы запросов, права доступа и дополнительные параметры, если это необходимо.

## Пользовательские роли и права доступа

-   **Аноним** — может просматривать описания произведений, читать отзывы и комментарии.
-   **Аутентифицированный пользователь (`user`)** — может читать всё, как и **Аноним**, может публиковать отзывы и ставить оценки произведениям, может комментировать отзывы; может редактировать и удалять свои отзывы и комментарии, редактировать свои оценки произведений. Эта роль присваивается по умолчанию каждому новому пользователю.
-   **Модератор (`moderator`)** — те же права, что и у **Аутентифицированного пользователя**, плюс право удалять и редактировать **любые** отзывы и комментарии.
-   **Администратор (`admin`)** — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.

## Самостоятельная регистрация новых пользователей

1.  Пользователь отправляет POST-запрос с параметрами `email` и `username` на эндпоинт `/api/v1/auth/signup/`.
2.  Сервис **YaMDB** отправляет письмо с кодом подтверждения (`confirmation_code`) на указанный адрес `email`.
3.  Пользователь отправляет POST-запрос с параметрами `username` и `confirmation_code` на эндпоинт `/api/v1/auth/token/`, в ответе на запрос ему приходит `token` (JWT-токен).

В результате пользователь получает токен и может работать с API проекта, отправляя этот токен с каждым запросом.

После регистрации и получения токена пользователь может отправить PATCH-запрос на эндпоинт `/api/v1/users/me/` и заполнить поля в своём профайле (описание полей — в документации).

## Создание пользователя администратором

Пользователей создаёт администратор — через админ-зону сайта или через POST-запрос на специальный эндпоинт `api/v1/users/` (описание полей запроса для этого случая есть в документации).

После этого пользователь должен самостоятельно отправить свой `email` и `username` на эндпоинт `/api/v1/auth/signup/` , в ответ ему должно прийти письмо с кодом подтверждения.

Далее пользователь отправляет POST-запрос с параметрами `username` и `confirmation_code` на эндпоинт `/api/v1/auth/token/`, в ответе на запрос ему приходит `token` (JWT-токен), как и при самостоятельной регистрации.

## Установка и запуск

```bash
# Клонировать репозиторий и перейти в него в командной строке:
$ git clone https://github.com/ilyakutilin/api_yamdb.git
$ cd api_yamdb

# Cоздать и активировать виртуальное окружение:
$ python3 -m venv env
$ source env/bin/activate

# Установить зависимости:
$ python3 -m pip install --upgrade pip
$ pip install -r requirements.txt

# Выполнить миграции:
$ python3 manage.py migrate

# Запустить проект:
$ python3 manage.py runserver
```

## Документация

Полная документация доступна по адресу `api/v1/redoc` после запуска проекта.
